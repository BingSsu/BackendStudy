# 브라우저와 작동원리

1. 브라우저란?
```
HTML 문서와 그림, 멀티미디어 파일 등 월드 와이드 웹을 기반으로 한 "인터넷의 컨텐츠를 열람하기위한" 응용 프로그램의 총칭
```

2. 브라우저의 종류
> Chrome, Internet Explorer, Firefox, Safari 등이 있다

3. 브라우저의 주요 기능
```
브라우저의 기본 기능은 사용자가 선택한 자원을 서버에 요청하고 브라우저의 표시하는 것이다. 자원은 보통 HTML 문서지만 PDF나 이미지 또는 다른 형태일 수 있다. 
```

4. 브라우저의 기본 구조
```
1. 사용자 인터페이스 : 주소 표시줄, 이전/다음 버튼, 북마크 메뉴 등, 요청한 페이지를 보여주는 창을 제외한 나머지 모든 부분

2. 브라우저 엔진 : 사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어

3. 렌더링 엔진 : 요청한 콘텐츠를 표시. ex) HTML을 요청하면 HTML과 CSS를 파싱하여 표시함

4. 통신 : HTTP 요청과 같은 네트워크 호출에 사용됨. 이것은 플랫폼 독자적인 인터페이스이고 각 플랫폼 하부에서 실행됨

5. UI 백엔드 : 콤보 박스와 창같은 기본적인 장치를 그림 플랫폼에서 명시하지 않은 일반적 인터페이스로서 OS 사용자 인터페이스 체계를 사용

6. 자바스크립트 해석기 : 자바스크립트 코드를 해석하고 실행

7. 자료 저장소 : 이 부분은 자료를 저장하는 계층. 쿠키를 저장하는것과 같이 모든 종류의 자원을 하드 디스크에 저장할 필요가 있다. HTML5 명세에는 브라우저가 지원하는 '웹 데이터베이스'가 정의되어 있다.
```

5. 렌더링 엔진
```
- 렌더링 엔진의 역할 : 사용자가 요청한 내용을 서버로부터 받아 브라우저 화면에 표시하는 역할을 함

렌더링 엔진을 통해 표시 할 수 있는 것
(1) 기본 : HTML 및 XML 문서 그리고 이미지를 표시할 수 있음

(2) 확장 : 플러그 인이나 브라우저마다 확장 기능을 이용해 PDF와 같은 유형도 표시할 수 있음

(3) 종류 : Safari, Chrome 웹 서킷 엔진

(4) 동작 과정

(4-1) 통신으로부터 요청한 문서의 내용을 얻음 : 로더가 로딩(단순 로딩이 아닌 이미 읽은 것인지 판단, 팝업창을 띄울것인지 판단.)

(4-2) HTML 문서 파싱 : 서버로부터 받은 문서를 브라우저가 이해하고 사용할 수 있는 구조로 문서를 변환하여 반환하는 과정
- 브라우저 화면에 랜더링하기위해 다루기 쉬운 구조로 바꿈 : 브라우저가 사용할 수 있는 구조(객체형태, 객체의 구조화 - 레이어)
- DOM API는 문서 태그(마크업 문서)를 객체로 바꿔주는 API(문서를 표현하고 저장하고 조작하는 표준 방법)
- 각각의 태그를 객체로 바꿔줌으로서 객체(태그)를 제어하거나 변경 등이 가능해짐
- 잘못된 제작을 했다하더라도 파서가 오류를 수정해줌(예시 : head를 빠뜨렸다고해도 암묵적으로 head 엘리먼트 객체를 만들어줌)
- 객체가 가진 프로퍼티, 메소드를 통해서 다양한 것들을 할 수 있고 얻어올 수 있음
- 탐색하기에는 쉽지만, 구조 속에서 일일이 찾고 구조를 변경하고 다시 그려야하기때문에 빠르지 않음(싱글페이지 어플리케이션, 많은 이벤트 핸들러가 있고 이벤트 핸들러에 의해 DOM 구조가 바뀜 == 가상DOM)
- .html 문서 내에 사용하는 html 태그 종류들은 HTMLElement의 자식이고, HTMLElement는 Element의 자식이고 최상위에는 Node가 있음
- 이런 구조를 DOM 트리라함(DOM API를 통해서 변환된 객체들의 구조)
- 받은 .html 문서 파일을 구조화하여 브라우저가 이해할 수 있도록 하는 것이 랜더링엔진때문이였음
- DOM 을 통해 문서의 구조화된 표현(객체) 제공하고 프로그래밍 언어가 DOM 구조에 접근할 수 있는 방법을 제공함
    => DOM 은 구조화시키면서, 구조화된 표현을 프로그래밍 언어가 접근하여 다룰 수 있도록 지원까지 함(보통 자바스크립트 활용)

(4-3) CSS 파일 파싱
- css의 모든 정보를 스타일 구조체로 생성함
- 이를 CSSOM 트리라고 함
- 없을 경우 기본적으로 브라우저가 정한 css값이 정의 되는것 같음

(4-4) 4-2의 결과중 일부와 4-3의 결과를 합하여 랜더링 트리를 생성 : 문서의 시각적인 요소가 포함된 형태
- 랜더링 트리는 표시되는 각 요소의 레이아웃을 계산하는데 사용됨
- DOM 트리는 내용 자체를 저장하고 화면에 표시하기 위한 위치 크기 그리기 순서 저장을 위한 별도의 트리 구조가 필요함
- DOM 요소 중 시각적 요소와 관련된 요소(head와 같은 비 시각적 요소는 포함하지 않음)와 CSS 파싱 내용을 합쳐 페이지 랜더링에 사용하는 새로운 트리를 만듬
- 랜더 트리는 박스모델을 포함하고 있음

(4-5) 배치를 함, 화면에 정확한 위치에 표시

(4-6) UI 백엔드가 화면에 그리기 과정을 함
- 랜더링 트리를 탐색하면서 특정 메모리 공간에 RGB값을 채우는 과정

(4-7) 화면에 표시
```